class Solution:
    def numTrees(self, n: int) -> int:

        memo = {}
        

        def helper(low: int, high: int):
            if (low, high) in memo:
                return memo[(low, high)]

            if low >= high:
                return 1

            count = 0

            for i in range(low, high + 1):
                left = helper(low, i - 1)
                right = helper(i + 1, high)

                count += left * right

            memo[(low, high)] = count
            return count

        return helper(1, n)
